<button id="login">LOG IN</button>
<button id="register">GO PERMANENT</button>
<div id="login_inline"></div>
<div id="paypal-button-container"></div>
<script>
  var
    playername = "playername1",
    color = 0x110001;
</script>
<script src="https://cdn.auth0.com/js/auth0/9.5.1/auth0.min.js"></script>
<script src="https://cdn.auth0.com/js/lock/11.7.2/lock.min.js"></script>
<script>
var login_inline = new Auth0Lock(
  'O6nD56ZYl6E9Njp5gXlYoTReaObvc240',
  'nodescape.auth0.com',
  {
    container: 'login_inline',
    allowSignUp: false,
    //signUpLink: "javascript:console.log('sign up');",
    auth: {
      responseType: 'id_token token',
      redirect: false
    }
  }
);
login_inline.show(); // render

// Listening for the authenticated event
login_inline.on("authenticated", function(authResult) {
  // Use the token in authResult to getUserInfo() and save it to localStorage
  login_inline.getUserInfo(authResult.accessToken, function(error, profile) {
    if (error) {
      // Handle error
      return;
    }
    console.log(profile);
    console.log(authResult);

    let user_id = authResult.idTokenPayload.sub.split("|")[1];
    console.log("user id", user_id);
    // console.log("nickname", profile.nickname);

    //localStorage.setItem('accessToken', authResult.accessToken);
    //localStorage.setItem('profile', JSON.stringify(profile));
  });
});

var login_modal = new Auth0Lock(
  'O6nD56ZYl6E9Njp5gXlYoTReaObvc240',
  'nodescape.auth0.com',
  {
    auth: {
      redirect: false
    }
  }
);

var register_modal = new Auth0Lock(
  'O6nD56ZYl6E9Njp5gXlYoTReaObvc240',
  'nodescape.auth0.com',
  {
    initialScreen: 'signUp',
    auth: {
      redirect: false
    }
  }
);

document.getElementById("login").onclick= (event) => {
    event.preventDefault();
    login_modal.show({
        rememberLastLogin: true
    });
}

document.getElementById("register").onclick= (event) => {
    event.preventDefault();
    register_modal.show({
        rememberLastLogin: true
    });
}
</script>

<!-- PAYPAL -->
<script src="https://www.paypalobjects.com/api/checkout.js"></script>
<script>
  paypal.Button.render({

      env: 'sandbox', // sandbox | production

      // PayPal Client IDs - replace with your own
      // Create a PayPal app: https://developer.paypal.com/developer/applications/create
      client: {
          sandbox:    'AUwaHya1Bdl37I9AlWCoXI20FrwTKipn3dx8zwc7LHM_XNS4qGdEB7hKFanc3y5H5fItNqL_QU677sl9',
          production: '<insert production client id>'
      },

      // Show the buyer a 'Pay Now' button in the checkout flow
      commit: true,

      // payment() is called when the button is clicked
      payment: function(data, actions) {

          // Make a call to the REST api to create the payment
          return actions.payment.create({
              payment: {
                  transactions: [
                      {
                          amount: { total: '0.01', currency: 'USD' }
                      }
                  ]
              }
          });
      },

      // onAuthorize() is called when the buyer approves the payment
      onAuthorize: function(data, actions) {
          console.log(data);

          // Make a call to the REST api to execute the payment
          // return actions.payment.execute().then(function() {
          //     window.alert('Payment Complete!');
          // });
      }

  }, '#paypal-button-container');

</script>